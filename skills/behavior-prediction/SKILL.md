# Behavior Prediction Skill V2

ä¸º AI åŠ©æ‰‹æä¾›ç”¨æˆ·è¡Œä¸ºé¢„æµ‹èƒ½åŠ›ã€‚é€šè¿‡è®°å½•å’Œåˆ†æç”¨æˆ·çš„ä¼šè¯å†…å®¹ï¼Œå­¦ä¹ ç”¨æˆ·çš„å·¥ä½œæµç¨‹ã€åå¥½å’Œä¹ æƒ¯ï¼Œæä¾›æ™ºèƒ½é¢„æµ‹å’Œä¸ªæ€§åŒ–äº¤äº’ã€‚

## å®‰è£…è¯´æ˜

### å®‰è£…æ­¥éª¤

å®‰è£…æ­¤ Skill éœ€è¦å®Œæˆä»¥ä¸‹ä¸¤æ­¥ï¼š

#### 1. å®‰è£…è„šæœ¬æ–‡ä»¶

å°† `scripts/` ç›®å½•å¤åˆ¶åˆ° Cursor skills ç›®å½•ï¼š

```bash
# å…¨å±€å®‰è£…ï¼ˆæ¨èï¼Œæ‰€æœ‰é¡¹ç›®å…±äº«ï¼‰
cp -r scripts/ ~/.cursor/skills/behavior-prediction/scripts/

# æˆ–é¡¹ç›®çº§å®‰è£…ï¼ˆä»…å½“å‰é¡¹ç›®ä½¿ç”¨ï¼‰
cp -r scripts/ .cursor/skills/behavior-prediction/scripts/
```

#### 2. å®‰è£…è§„åˆ™æ–‡ä»¶ï¼ˆé‡è¦ï¼‰

å°† `rules/behavior-prediction.mdc` å¤åˆ¶åˆ° Cursor rules ç›®å½•ï¼š

```bash
# å…¨å±€å®‰è£…ï¼ˆæ¨èï¼Œæ‰€æœ‰é¡¹ç›®ç”Ÿæ•ˆï¼‰
cp rules/behavior-prediction.mdc ~/.cursor/rules/

# æˆ–é¡¹ç›®çº§å®‰è£…ï¼ˆä»…å½“å‰é¡¹ç›®ç”Ÿæ•ˆï¼‰
cp rules/behavior-prediction.mdc .cursor/rules/
```

> **æ³¨æ„**ï¼šè§„åˆ™æ–‡ä»¶å¿…é¡»å®‰è£…ï¼Œå¦åˆ™ AI ä¸ä¼šè‡ªåŠ¨è§¦å‘è¡Œä¸ºè®°å½•å’Œé¢„æµ‹åŠŸèƒ½ã€‚

### å®‰è£…ä½ç½®è¯´æ˜

| å®‰è£…çº§åˆ« | è„šæœ¬ç›®å½• | è§„åˆ™ç›®å½• | æ•°æ®ç›®å½• |
|---------|---------|---------|---------|
| **å…¨å±€** | `~/.cursor/skills/behavior-prediction/` | `~/.cursor/rules/` | `~/.cursor/skills/behavior-prediction-data/` |
| **é¡¹ç›®** | `.cursor/skills/behavior-prediction/` | `.cursor/rules/` | `.cursor/skills/behavior-prediction-data/` |

- **å…¨å±€å®‰è£…**ï¼šæ•°æ®è·¨é¡¹ç›®å…±äº«ï¼Œé€‚åˆä¸ªäººä½¿ç”¨
- **é¡¹ç›®å®‰è£…**ï¼šæ•°æ®ä»…åœ¨é¡¹ç›®å†…ï¼Œé€‚åˆå›¢é˜Ÿåä½œ

### éªŒè¯å®‰è£…

å®‰è£…å®Œæˆåï¼Œå¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯ï¼š

```bash
# éªŒè¯è„šæœ¬å®‰è£…
python3 ~/.cursor/skills/behavior-prediction/scripts/hook.py --init

# éªŒè¯è§„åˆ™å®‰è£…ï¼ˆæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼‰
ls ~/.cursor/rules/behavior-prediction.mdc
```

### ä½¿ç”¨è„šæœ¬è‡ªåŠ¨å®‰è£…è§„åˆ™

ä¹Ÿå¯ä»¥ä½¿ç”¨ `setup_rule.py` è„šæœ¬è‡ªåŠ¨å®‰è£…è§„åˆ™æ–‡ä»¶ï¼š

```bash
# å¯ç”¨è§„åˆ™ï¼ˆé¡¹ç›®çº§ï¼‰
python3 ~/.cursor/skills/behavior-prediction/scripts/setup_rule.py '{"action": "enable"}'

# å¯ç”¨è§„åˆ™ï¼ˆå…¨å±€ï¼‰
python3 ~/.cursor/skills/behavior-prediction/scripts/setup_rule.py '{"action": "enable", "location": "global"}'

# ç¦ç”¨è§„åˆ™
python3 ~/.cursor/skills/behavior-prediction/scripts/setup_rule.py '{"action": "disable"}'

# æ›´æ–°è§„åˆ™åˆ°æœ€æ–°ç‰ˆæœ¬
python3 ~/.cursor/skills/behavior-prediction/scripts/setup_rule.py '{"action": "update"}'

# æ£€æŸ¥è§„åˆ™çŠ¶æ€
python3 ~/.cursor/skills/behavior-prediction/scripts/setup_rule.py '{"action": "check"}'
```

æˆ–è€…é€šè¿‡è‡ªç„¶è¯­è¨€å‘Šè¯‰ AIï¼š
- "å¯ç”¨è¡Œä¸ºé¢„æµ‹è§„åˆ™"
- "ç¦ç”¨è¡Œä¸ºé¢„æµ‹è§„åˆ™"
- "æ£€æŸ¥è¡Œä¸ºé¢„æµ‹è§„åˆ™çŠ¶æ€"

---

## å®‰è£…åæç¤º

> **é‡è¦**ï¼šå®‰è£…å®Œæˆåï¼Œè¯·å°†ä»¥ä¸‹å†…å®¹å±•ç¤ºç»™ç”¨æˆ·ã€‚

---

âœ… **Behavior Prediction Skill V2 å®‰è£…æˆåŠŸï¼**

### å¿«é€Ÿå¼€å§‹

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `å¯ç”¨è¡Œä¸ºé¢„æµ‹è§„åˆ™` | å¼€å¯è‡ªåŠ¨è¡Œä¸ºé¢„æµ‹åŠŸèƒ½ï¼ˆæ¨èï¼‰ |
| `æŸ¥çœ‹æˆ‘çš„è¡Œä¸ºæ¨¡å¼` | æŸ¥çœ‹å­¦ä¹ åˆ°çš„è¡Œä¸ºæ¨¡å¼ |
| `æŸ¥çœ‹ç”¨æˆ·ç”»åƒ` | æŸ¥çœ‹ç”¨æˆ·ç”»åƒä¿¡æ¯ |
| `æŸ¥çœ‹è¡Œä¸ºç»Ÿè®¡` | æŸ¥çœ‹ç»Ÿè®¡æ•°æ®æ¦‚è§ˆ |

### æ¨èä¸‹ä¸€æ­¥

è¿è¡Œ `å¯ç”¨è¡Œä¸ºé¢„æµ‹è§„åˆ™` å¼€å¯è‡ªåŠ¨è¡Œä¸ºé¢„æµ‹åŠŸèƒ½ï¼Œè¿™æ ·ï¼š
- ä¼šè¯å¼€å§‹æ—¶ä¼šè‡ªåŠ¨åŠ è½½ä½ çš„è¡Œä¸ºæ¨¡å¼
- ä¼šè¯ç»“æŸæ—¶ä¼šè‡ªåŠ¨è®°å½•å¹¶å­¦ä¹ ä½ çš„å·¥ä½œæµç¨‹
- åœ¨é€‚å½“æ—¶æœºä¼šæä¾›æ™ºèƒ½é¢„æµ‹å»ºè®®

### å·¥ä½œåŸç†

è¯¥ Skill ä¼šè®°å½•ä½ ä¸ AI çš„ä¼šè¯å†…å®¹ï¼ˆå·¥ä½œæµç¨‹ã€åå¥½ã€æŠ€æœ¯æ ˆç­‰ï¼‰ï¼Œå­¦ä¹ ä½ çš„å·¥ä½œä¹ æƒ¯ï¼Œå½“ä½ ä¸‹æ¬¡å¼€å§‹ä¼šè¯æ—¶ï¼ŒAI ä¼šæ ¹æ®ä½ çš„ä¹ æƒ¯ä¸»åŠ¨æä¾›å»ºè®®ã€‚

### ä½¿ç”¨ç¤ºä¾‹

```
ç”¨æˆ·: å¸®æˆ‘åˆ›å»ºä¸€ä¸ª API æ–‡ä»¶
AI: å·²åˆ›å»º src/api/auth.py
    âœ¨ åŸºäºä½ çš„ä¹ æƒ¯ï¼Œä½ å¯èƒ½æƒ³è¦è¿è¡Œæµ‹è¯• (85%)
    è¦æ‰§è¡Œå—ï¼Ÿ
```

### é¦–æ¬¡ä½¿ç”¨æç¤º

- ğŸ†• é¦–æ¬¡å®‰è£…æ—¶æ²¡æœ‰å†å²æ•°æ®ï¼Œéœ€è¦ä½¿ç”¨ä¸€æ®µæ—¶é—´ç§¯ç´¯
- ğŸ’¡ ç³»ç»Ÿä¼šè‡ªåŠ¨å­¦ä¹ ä½ çš„å·¥ä½œæµç¨‹
- ğŸ”’ æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ï¼Œä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨

### éªŒè¯å®‰è£…

è¿è¡Œ `æ£€æŸ¥è¡Œä¸ºé¢„æµ‹è§„åˆ™çŠ¶æ€` ç¡®è®¤è§„åˆ™å·²å¯ç”¨ã€‚

---

---

## åŠŸèƒ½æ¦‚è¿°

### æ ¸å¿ƒèƒ½åŠ›

| èƒ½åŠ› | è¯´æ˜ |
|------|------|
| **ä¼šè¯è®°å½•** | ä¼šè¯ç»“æŸæ—¶è®°å½•å®Œæ•´ä¼šè¯å†…å®¹ |
| **æ¨¡å¼å­¦ä¹ ** | æå–å·¥ä½œæµç¨‹ã€åå¥½ã€é¡¹ç›®æ¨¡å¼ |
| **æ™ºèƒ½é¢„æµ‹** | åŸºäºæ¨¡å¼é¢„æµ‹ä¸‹ä¸€æ­¥æ“ä½œ |
| **ç”¨æˆ·ç”»åƒ** | ç»¼åˆåˆ†æç”Ÿæˆç”¨æˆ·ç”»åƒ |
| **äº¤äº’ä¼˜åŒ–** | æ ¹æ®ç”¨æˆ·åå¥½è°ƒæ•´äº¤äº’æ–¹å¼ |

### è¡Œä¸ºæ¨¡å¼ç±»å‹

1. **å·¥ä½œæµç¨‹æ¨¡å¼**ï¼šè®¾è®¡ â†’ å®ç° â†’ æµ‹è¯• â†’ æäº¤
2. **åå¥½æ¨¡å¼**ï¼šæŠ€æœ¯æ ˆåå¥½ã€ç¼–ç é£æ ¼ã€å·¥å…·é€‰æ‹©
3. **é¡¹ç›®æ¨¡å¼**ï¼šä¸åŒé¡¹ç›®ç±»å‹çš„å¼€å‘æµç¨‹

## ä½¿ç”¨æ–¹å¼

### è‡ªåŠ¨æ¨¡å¼ï¼ˆæ¨èï¼‰

å¯ç”¨ Always Applied Rule åï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ï¼š
- ä¼šè¯å¼€å§‹æ—¶åŠ è½½ç”¨æˆ·ç”»åƒ
- ä¼šè¯ç»“æŸæ—¶è®°å½•å¹¶æ›´æ–°æ¨¡å¼
- åœ¨é€‚å½“æ—¶æœºæä¾›é¢„æµ‹å»ºè®®

### æ‰‹åŠ¨å‘½ä»¤

| å‘½ä»¤ | æè¿° |
|------|------|
| `æŸ¥çœ‹æˆ‘çš„è¡Œä¸ºæ¨¡å¼` | æ˜¾ç¤ºå­¦ä¹ åˆ°çš„è¡Œä¸ºæ¨¡å¼ |
| `æŸ¥çœ‹ç”¨æˆ·ç”»åƒ` | æ˜¾ç¤ºç”¨æˆ·ç”»åƒä¿¡æ¯ |
| `æ›´æ–°ç”¨æˆ·ç”»åƒ` | æ‰‹åŠ¨è§¦å‘ç”»åƒæ›´æ–° |
| `æŸ¥çœ‹è¡Œä¸ºç»Ÿè®¡` | æ˜¾ç¤ºç»Ÿè®¡æ•°æ®æ¦‚è§ˆ |
| `é¢„æµ‹ä¸‹ä¸€æ­¥` | æ‰‹åŠ¨è§¦å‘é¢„æµ‹ |

## è„šæœ¬è¯´æ˜

### hook.py

ç»Ÿä¸€çš„ hook å…¥å£ï¼Œæ”¯æŒä¼šè¯ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚

```bash
# ä¼šè¯å¼€å§‹æ—¶
python3 <skill_dir>/scripts/hook.py --init

# ä¼šè¯ç»“æŸæ—¶
python3 <skill_dir>/scripts/hook.py --finalize '{
  "session_summary": {
    "topic": "ä¼šè¯ä¸»é¢˜",
    "goals": ["ç›®æ ‡"],
    "completed_tasks": ["ä»»åŠ¡"],
    "technologies_used": ["æŠ€æœ¯"],
    "workflow_stages": ["implement", "test"],
    "tags": ["#tag"]
  },
  "operations": {
    "files": {"created": [], "modified": [], "deleted": []},
    "commands": []
  },
  "conversation": {
    "user_messages": ["æ¶ˆæ¯"],
    "message_count": 1
  },
  "time": {
    "start": "ISO8601",
    "end": "ISO8601"
  }
}'
```

### record_session.py

è®°å½•å®Œæ•´ä¼šè¯åˆ°æœ¬åœ°ã€‚

```bash
python3 <skill_dir>/scripts/record_session.py '{...session_data...}'
```

### extract_patterns.py

ä»ä¼šè¯è®°å½•ä¸­æå–è¡Œä¸ºæ¨¡å¼ã€‚

```bash
# æŸ¥çœ‹å½“å‰æ¨¡å¼
python3 <skill_dir>/scripts/extract_patterns.py

# ä»ä¼šè¯æ•°æ®æå–æ¨¡å¼
python3 <skill_dir>/scripts/extract_patterns.py '{...session_data...}'
```

### user_profile.py

ç”¨æˆ·ç”»åƒç®¡ç†ã€‚

```bash
# è·å–ç”¨æˆ·ç”»åƒ
python3 <skill_dir>/scripts/user_profile.py

# æ›´æ–°ç”¨æˆ·ç”»åƒ
python3 <skill_dir>/scripts/user_profile.py '{"action": "update"}'

# è·å– AI æ‘˜è¦
python3 <skill_dir>/scripts/user_profile.py '{"action": "summary"}'
```

### get_predictions.py

è·å–é¢„æµ‹å»ºè®®ã€‚

```bash
# è·å–å½“å‰é˜¶æ®µçš„é¢„æµ‹
python3 <skill_dir>/scripts/get_predictions.py '{"current_stage": "implement"}'

# å¸¦ä¸Šä¸‹æ–‡çš„é¢„æµ‹
python3 <skill_dir>/scripts/get_predictions.py '{
  "current_stage": "implement",
  "context": {"project_type": "backend_api"}
}'
```

## å·¥ä½œæµç¨‹é˜¶æ®µ

| é˜¶æ®µ | è¯´æ˜ |
|------|------|
| design | è®¾è®¡ã€è§„åˆ’ã€è®¨è®ºæ–¹æ¡ˆ |
| implement | ç¼–å†™ä»£ç ã€åˆ›å»ºæ–‡ä»¶ |
| test | ç¼–å†™æµ‹è¯•ã€è¿è¡Œæµ‹è¯• |
| debug | è°ƒè¯•ã€ä¿®å¤é—®é¢˜ |
| refactor | é‡æ„ã€ä¼˜åŒ–ä»£ç  |
| document | ç¼–å†™æ–‡æ¡£ |
| deploy | éƒ¨ç½²ã€å‘å¸ƒ |
| review | ä»£ç å®¡æŸ¥ |
| commit | æäº¤ä»£ç  |

## æ•°æ®å­˜å‚¨

```
behavior-prediction-data/
â”œâ”€â”€ sessions/                # ä¼šè¯è®°å½•ï¼ˆæŒ‰æœˆä»½ï¼‰
â”‚   â””â”€â”€ 2026-01/
â”‚       â””â”€â”€ sess_20260131_001.json
â”œâ”€â”€ patterns/                # è¡Œä¸ºæ¨¡å¼
â”‚   â”œâ”€â”€ workflow_patterns.json   # å·¥ä½œæµç¨‹æ¨¡å¼
â”‚   â”œâ”€â”€ preferences.json         # åå¥½æ•°æ®
â”‚   â””â”€â”€ project_patterns.json    # é¡¹ç›®æ¨¡å¼
â”œâ”€â”€ profile/                 # ç”¨æˆ·ç”»åƒ
â”‚   â””â”€â”€ user_profile.json
â”œâ”€â”€ index/                   # ç´¢å¼•
â”‚   â””â”€â”€ sessions_index.json
â””â”€â”€ config.json              # ç”¨æˆ·é…ç½®
```

## é…ç½®é€‰é¡¹

é…ç½®æ–‡ä»¶ä½äºæ•°æ®ç›®å½•çš„ `config.json`ã€‚

```json
{
  "version": "2.0",
  "enabled": true,
  "recording": {
    "enabled": true,
    "retention_days": 90
  },
  "patterns": {
    "extraction_enabled": true,
    "min_sessions_for_pattern": 3
  },
  "profile": {
    "auto_update": true,
    "update_interval_sessions": 10
  },
  "prediction": {
    "enabled": true,
    "suggest_threshold": 0.5,
    "max_suggestions": 3
  }
}
```

| å‚æ•° | é»˜è®¤å€¼ | è¯´æ˜ |
|------|--------|------|
| `enabled` | `true` | æ€»å¼€å…³ |
| `recording.retention_days` | `90` | ä¼šè¯è®°å½•ä¿ç•™å¤©æ•°ï¼Œ-1 è¡¨ç¤ºæ°¸ä¹… |
| `patterns.min_sessions_for_pattern` | `3` | æœ€å°‘ä¼šè¯æ•°æ‰è¯†åˆ«æ¨¡å¼ |
| `profile.auto_update` | `true` | æ˜¯å¦è‡ªåŠ¨æ›´æ–°ç”¨æˆ·ç”»åƒ |
| `profile.update_interval_sessions` | `10` | æ¯ N æ¬¡ä¼šè¯æ›´æ–°ä¸€æ¬¡ç”»åƒ |
| `prediction.suggest_threshold` | `0.5` | æ˜¾ç¤ºå»ºè®®çš„æœ€ä½ç½®ä¿¡åº¦ |

## éšç§è¯´æ˜

- æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°
- ä¸ä¸Šä¼ ä»»ä½•ä¿¡æ¯åˆ°æœåŠ¡å™¨
- ç”¨æˆ·å¯ä»¥éšæ—¶åˆ é™¤æ•°æ®
- ä¼šè¯å†…å®¹ä»…ç”¨äºæ¨¡å¼å­¦ä¹ 

## é¢„æµ‹å»ºè®®ç¤ºä¾‹

å½“å®Œæˆä¸€ä¸ªé˜¶æ®µåï¼Œå¦‚æœç³»ç»Ÿæœ‰é«˜ç½®ä¿¡åº¦çš„é¢„æµ‹ï¼Œä¼šæ˜¾ç¤ºå»ºè®®ï¼š

```
âœ¨ åŸºäºä½ çš„ä¹ æƒ¯ï¼Œä½ å¯èƒ½æƒ³è¦ï¼š
â†’ è¿è¡Œæµ‹è¯• (ç½®ä¿¡åº¦: 85%)

è¦æ‰§è¡Œå—ï¼Ÿ
```

## ç”¨æˆ·ç”»åƒç¤ºä¾‹

```json
{
  "stats": {
    "total_sessions": 50,
    "active_days": 30
  },
  "preferences": {
    "common_stages": ["implement", "test", "commit"],
    "common_tech": ["python", "fastapi", "pytest"]
  },
  "work_style": {
    "planning_tendency": 0.3,
    "test_driven": 0.6,
    "documentation_focus": 0.2
  }
}
```
